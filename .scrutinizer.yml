checks:
    php:
        code_rating: true
        duplication: true
        
filter:
    paths:
        - 'app/*'
    excluded_paths:
        - 'app/views/*'
        - 'app/config/*'
        - 'app/database/*'
        - 'vendor/*'
        - 'tests/*'

tools:
    php_mess_detector: true
    php_cpd: true
    php_pdepend:
        excluded_dirs: [vendor]
        
build:
    dependencies:
        before:
            - php -r "file_exists('.env') || copy('.env.example', '.env');"
            - php artisan key:generate
            - touch database/database.sqlite
    tests:
        override:
            -
                command: 'vendor/bin/phpunit --coverage-clover=xrsites'
                coverage:
                    file: 'xrsites'
                    format: 'clover'
